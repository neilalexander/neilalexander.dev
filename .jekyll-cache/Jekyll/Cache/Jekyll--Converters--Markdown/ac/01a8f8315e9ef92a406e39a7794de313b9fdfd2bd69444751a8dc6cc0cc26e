I"Ö7<p><strong>Updated 17th January 2019</strong></p>

<p>Merging their partnership with FON with their own commercial BT Openzone Wi-Fi network, BT now provide a large-scale Wi-Fi service in the United Kingdom under the name â€œBT Wi-Fiâ€. With this, BT Broadband (and one-off paying) customers are able to access BT Wi-Fi not just from commercial locations but also from households with the BT Wi-Fi service broadcasting from their BT Home Hubs.Â </p>

<p>However, the BT Wi-Fi service has itâ€™s downsides. If you are using a computer and you connect to the â€œBTWiFi-with-FONâ€ SSID, then there is no wireless encryption (like WPA) of any kind between your device and the hotspot. This means that your traffic, if not encrypted through some other means, is susceptible to eavesdropping by a nearby adversary. This can put you and your data/passwords at risk. This is actually a common problem with many public Wi-Fi hotspots, and an issue that not many users are educated on. Be cautious of any unsecured networks, kids!</p>

<p>Secondly, and somewhat unrelated, the service will not â€œrememberâ€ you and will expect you to log back in each time you roam to a new hotspot or after having been away from a given hotspot for a period of time. This can become somewhat tedious if you are a frequent user of the service.</p>

<p>It is possible, however, to securely connect to the BT Wi-Fi service using a WPA-encrypted wireless connection, and to be automatically logged in at the same time, by making use of an alternative wireless SSID currently used only by iOS devices with the BT Wi-Fi app installed. This article explores the working parts of the authenticated login and how to configure it on other devices.</p>

<h4 id="introducing-8021x">Introducing 802.1X</h4>

<p>802.1X is an authentication mechanism for network access points. There are both wireless and wired variants, and both support a number of authentication mechanisms, including certificate-based, SIM-based and integrated Windows logon, amongst others. The commonly adopted wireless variant is known as â€œWPA/WPA2 Enterpriseâ€.</p>

<p>The â€œBTWifi-Xâ€ SSID broadcasted by BT Home Hubs is a â€œWPA2 Enterpriseâ€-enabled SSID. It supports authentication using EAP-TTLS, which is effectively certificate-based authentication in combination with a username and password. This means that, once authenticated, any traffic between the client device and the hotspot is encrypted. Furthermore, the username and password supplied in the profile allow the device to prove itâ€™s identity to the BT Wi-Fi service automatically, allowing automatic login.</p>

<p>It is this â€œBTWifi-Xâ€ SSID that we are interested in.</p>

<h4 id="obtaining-the-configuration-profile">Obtaining the Configuration Profile</h4>

<p>iOS devices are able to take advantage of the secure â€œBTWifi-Xâ€ SSID by installing a configuration profile from the BT Wi-Fi app from the App Store, or more accurately, from a webpage linked from the BT Wi-Fi app. The Configuration Profile is a â€œmobileconfigâ€ file, specifically for iOS devices, which contains all of the relevant settings to make a secure connection. It includes the BT Wi-Fi security certificates, and your automatic login credentials. In order to continue, you will need to retrieve one of these profiles.</p>

<p>These instructions assume that you have reasonable technical know-how,Â access to an iOS device and that you are a BT Broadband account holder. You can borrow an iOS device temporarily to complete these steps, and you do not need to be in range of a BT Wi-Fi hotspot to acquire the profile.Â </p>

<ol>
  <li>
    <p>Install and open the BT Wi-Fi app, and go into the â€œMoreâ€ tab.</p>
  </li>
  <li>
    <p>Select â€œSettingsâ€ and then tap â€œInstall connection profileâ€.</p>
  </li>
  <li>
    <p>Enter your BT email address and password, tap â€œInstall connection profileâ€. You must log in with your email address here instead of your username, or otherwise the â€œInstall connection profileâ€ option will not be shown.</p>
  </li>
  <li>
    <p>Wait until you are redirected into Safari.</p>
  </li>
  <li>
    <p>Once the device has jumped to Safari, cancel the prompt to install the profile on your device and then copy the URL from the address bar.</p>
  </li>
  <li>
    <p>Send the link to your computer (by email, instant message or some other medium) and open the page in your web browser. The link may expire after some time so aim to do this quickly.</p>
  </li>
  <li>
    <p>Open the pageâ€™s source using your browserâ€™s developer tools and find the direct link to download the â€œmobileconfigâ€ hidden in the <code class="highlighter-rouge">&lt;script&gt;</code> section of the HTML.</p>
  </li>
  <li>
    <p>Upon navigating to this URL, you should be prompted to download the â€œmobileconfigâ€ file. Save it to your computer and open it in the text editor of your choice.</p>
  </li>
  <li>
    <p>If you borrowed an iOS device to complete these steps, then from this point forward, you no longer need it and can uninstall the BT Wi-Fi app.</p>
  </li>
</ol>

<p>PLEASE NOTE that this â€œmobileconfigâ€ file uniquely identifies you,Â and contains your authentication credentials. Do not share any part of your â€œmobileconfigâ€ with anyone else.Â Please see the Important Warning at the bottom of this article for more information.</p>

<h4 id="configuring-the-8021x-connection-on-macos">Configuring the 802.1.X connection on macOS</h4>

<p>If you just want to enable the automatic login to BT Wi-Fi from your macOS computer, then you need not dissect the Configuration Profile. Instead, just double-click the â€œmobileconfigâ€ from Finder, agree to install the profile and the â€œBTWifi-Xâ€ wireless network will be configured automatically.Â </p>

<h4 id="dissecting-the-configuration-profile">Dissecting the Configuration Profile</h4>

<p>If you want to configure automatic login from another device that does not run iOS or macOS, then you will need to extract the relevant information from the â€œmobileconfigâ€ file.</p>

<p>The Configuration Profile is actually an XML document. It is signed and more than likely contains some garbage-looking characters at the beginning and end of the document, but these are actually certificates and signatures. The relevant and interesting section is the readable XML in the middle of the file.</p>

<p>There are two sections that are relevant. The first is the section that contains your (unique) automatic login username and password, as shown below:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;key&gt;TTLSInnerAuthentication&lt;/key&gt;
&lt;string&gt;PAP&lt;/string&gt;
&lt;key&gt;UserName&lt;/key&gt;
&lt;string&gt;8021x:BTRCon/newprof/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX:XXX-XXX&lt;/string&gt;
&lt;key&gt;UserPassword&lt;/key&gt;
&lt;string&gt;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&lt;/string&gt;
</code></pre></div></div>

<p>Make a note of the username, which starts with 8021x:BTRcon/Â and ends with some variation of your BT username. Also make a note of the password, which is a random string of numbers and letters.</p>

<p>The second section is the section that contains the generic (non-unique)Â BT 802.1X certificate, which is used as a â€œtrusted certificateâ€ to prove that the hotspot you are connecting to really belongs to BT Wi-Fi:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;key&gt;PayloadCertificateFileName&lt;/key&gt;
&lt;string&gt;BTwifi-X_DigicertRootCA.pem&lt;/string&gt;
&lt;key&gt;PayloadContent&lt;/key&gt;
&lt;data&gt;
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
...
&lt;/data&gt;
</code></pre></div></div>

<p>If you are well-versed on certificates, extract the Base64 certificate data from the â€œmobileconfigâ€ file and transform it into a correctly-formatted certificate file and name it â€œBTwifi-X_DigicertRootCA.pemâ€.</p>

<p>Otherwise, if you prefer convenience and you are happy to trust this website as a source, feel free to <a href="/attachments/BTwifi-X_DigicertRootCA.pem">click here to download the BT Wi-Fi trust certificate</a>.</p>

<h4 id="configuring-the-8021x-connection-on-windows">Configuring the 802.1X connection on Windows</h4>

<p>In order to enable the automatic BT Wi-Fi login from a Windows machine, you need to manually create the wireless profile.</p>

<p>To start with, you will need to add the BT 802.1X certificate to your trusted certificate store:</p>

<ol>
  <li>
    <p>Double-click the â€œBTwifi-X_DigicertRootCA.pemâ€ file in Windows Explorer.</p>
  </li>
  <li>
    <p>The certificate will be shown. Verify that it is issued to â€œDigiCert Global Root CAâ€ and that it is issued by â€œDigiCert Incâ€.</p>
  </li>
  <li>
    <p>If you downloaded the certificate from above and you wish to perform a further check on the certificate, then go into the Details tab and check that the Signature is â€œ<code class="highlighter-rouge">08 3B E0 56 90 42 46 B1 A1 75 6A C9 59 91 C7 4A</code>â€.</p>
  </li>
  <li>
    <p>On the â€œGeneralâ€ tab, click the â€œInstall Certificateâ€¦â€ button.</p>
  </li>
  <li>
    <p>In â€œStore Locationâ€, select â€œLocal Machineâ€ and click â€œNextâ€. You may be presented with a UAC privilege prompt. Confirm that you wish to continue.</p>
  </li>
  <li>
    <p>When asked, select â€œPlace all certificates in the following storeâ€.</p>
  </li>
  <li>
    <p>Click â€œBrowseâ€, and select â€œTrusted Root Certification Authoritiesâ€.</p>
  </li>
  <li>
    <p>Click â€œOKâ€.</p>
  </li>
  <li>
    <p>Click â€œNextâ€, and then â€œFinishâ€ to confirm.</p>
  </li>
</ol>

<p>Now that you have the BT 802.1X certificate installed and trusted, you can now configure the wireless profile to connect to â€œBTWifi-Xâ€ hotspots:Â </p>

<ol>
  <li>
    <p>Go into â€œControl Panelâ€, and then into â€œNetwork &amp; Sharing Centerâ€.</p>
  </li>
  <li>
    <p>Click â€œSet up a new connection or networkâ€.</p>
  </li>
  <li>
    <p>When prompted, select â€œManually connect to a wireless networkâ€ and then click â€œNextâ€.</p>
  </li>
  <li>
    <p>In â€œNetwork Nameâ€, enter: BTWifi-X</p>
  </li>
  <li>
    <p>In â€œSecurity Typeâ€, select â€œWPA2-Enterpriseâ€.</p>
  </li>
  <li>
    <p>Make sure that â€œStart this connection automaticallyâ€ is checked, and click â€œNextâ€.</p>
  </li>
  <li>
    <p>When prompted, click â€œChange connection settingsâ€.</p>
  </li>
  <li>
    <p>In the â€œSecurityâ€ tab, under â€œChoose a network authentication methodâ€, select â€œMicrosoft: EAP-TTLSâ€.</p>
  </li>
  <li>
    <p>Click the â€œSettingsâ€ button next to â€œMicrosoft: EAP-TTLSâ€.</p>
  </li>
  <li>
    <p>Under â€œConnect to these serversâ€, enter: <code class="highlighter-rouge">8021x.bt.com</code></p>
  </li>
  <li>
    <p>Under â€œTrusted Root Certification Authoritiesâ€, place a checkbox next to â€œ<code class="highlighter-rouge">8021x.bt.com</code>â€.</p>
  </li>
  <li>
    <p>On the same dialog box, uncheck â€œEnable identity privacyâ€ so that it is disabled.</p>
  </li>
  <li>
    <p>Make sure that â€œUnencrypted password (PAP)â€ is selected under â€œSelect a non-EAP method for authenticationâ€.</p>
  </li>
  <li>
    <p>Click â€œOKâ€ to return back to the â€œBTWifi-X Wireless Network Propertiesâ€ dialog.</p>
  </li>
  <li>
    <p>Click the â€œAdvanced settingsâ€ button.</p>
  </li>
  <li>
    <p>Place a check in the box next to â€œSpecify authentication modeâ€, and then select â€œUser authenticationâ€ in the drop-down box.</p>
  </li>
  <li>
    <p>Click the â€œSave Credentialsâ€ button.</p>
  </li>
  <li>
    <p>When prompted, enter the full username and password that you extracted from the â€œmobileconfigâ€ file above. The username starts with <code class="highlighter-rouge">8021x:BTRcon/</code> and ends with some variation of your BT username.</p>
  </li>
  <li>
    <p>Click â€œOKâ€, and then click â€œOKâ€ twice more to close each dialog box. Finally, click â€œCloseâ€.</p>
  </li>
</ol>

<p>You should now be able to connect to â€œBTWifi-Xâ€ from the wireless networks list.Â </p>

<h4 id="configuring-the-8021x-connection-on-other-platforms">Configuring the 802.1X connection on other platforms</h4>

<p>I am unable to provide specific instructions for other platforms, such as Android, but the following configuration settings should be of use to power users wishing to configure this on their devices:</p>

<ul>
  <li>
    <p>Wireless Service Set Identifier (SSID): <code class="highlighter-rouge">BTWifi-X</code></p>
  </li>
  <li>
    <p>Wireless authentication method: WPA2 Enterprise</p>
  </li>
  <li>
    <p>Wireless authentication EAP protocol: EAP-TTLS</p>
  </li>
  <li>
    <p>Inner EAP-TTLS authentication protocol: PAP</p>
  </li>
  <li>
    <p>Identity Privacy: Disabled</p>
  </li>
  <li>
    <p>Username: <code class="highlighter-rouge">8021x:BTRCon/newprof/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX:XXX-XXX</code> (as above)</p>
  </li>
  <li>
    <p>Password: <code class="highlighter-rouge">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code> (as above)</p>
  </li>
  <li>
    <p>Trusted Certificates: â€œDigiCert Global Root CAâ€ certificate (as above)</p>
  </li>
  <li>
    <p>Trusted Server Certificate Names / Connect To Names: 8021x.bt.com</p>
  </li>
</ul>

<h4 id="important-warning">Important Warning</h4>

<p>This bit really is important. Please read it.</p>

<p>Each BT Wi-Fi Configuration Profile UNIQUELY IDENTIFIES YOU, and contains specific authentication credentials linked to your BT Wi-Fi account.Â DO NOT SHARE your Configuration Profile, or any details from it, with anyone else.</p>

<p>You are NOT ANONYMOUS when using the BT Wi-Fi service.Â If the service is abused, BT will be able to identify that the abuse is coming from your BT Wi-Fi identity and your service will likely be terminated by BT. You have been warned. Just donâ€™t do it.</p>

<p>You perform the above actions ENTIRELY AT YOUR OWN RISK. I am not affiliated with BT in any way, and do not take any responsibility for anything that may happen as a result of following the above instructions.Â </p>
:ET